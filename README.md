# attendance_confirmation_collaboration
## 概要
出欠管理システム

## 目次
* [aaaa](#出欠ボード編集)
* 


## <a id="section99" href="#section99">コマンド</a>
### 起動
```
bundle exec rails server -b 0.0.0.0
```
http://localhost:3000/

## テーブル定義
以下のディレクトリで管理する
https://github.com/wtanabe/attendance_confirmation_collaboration/blob/master/db/schema.rb

## 外部設計書
### 出欠ボード_初期画面
![出欠ボード_初期画面](https://user-images.githubusercontent.com/17742203/70805206-b9d59300-1dfb-11ea-9713-4c4f221b71a9.png)
#### 機能一覧

| 機能名 | 機能内容
--- | ---
「出欠記入」ボタン押下 | シート「出欠ボード_出欠記入ボタン押下時」の画面に合わせて画面部品を表示・非表示にする。<br>※1
「出欠変更」ボタン押下 | シート「出欠ボード_出欠変更ボタン押下時」の画面に合わせて画面部品を表示・非表示にする。<br>※1
「出欠削除」ボタン押下 | シート「出欠ボード_出欠削除ボタン押下時」の画面に合わせて画面部品を表示・非表示にする。<br>※1
メニュー表示 | メニューボタンを押下するとメニューが表示される。
「出欠ボード編集」に遷移 | 1.メニューで表示されている「出欠ボード編集」ボタンを押下する。<br>2.「出欠ボード編集画面に遷移しますがよろしいですか？」と表示され、「はい」を押下するとと「出欠ボード編集」の画面に遷移する。
出欠情報の表示※2 | 
参加人数の集計※2 | 出欠ボードに表示する出欠情報で日付毎の参加人数の合計を表示する。<br>

※1 画面を遷移するのではなくjsで画面をコントロールする。<br>
※2 以下の画面にも同じ機能が存在する。<br>・出欠ボード_出欠記入ボタン押下時<br>・出欠ボード_出欠変更ボタン押下時<br>・出欠ボード_出欠削除ボタン押下時

#### URLと処理の対応表
| URL | 処理               | CRUD   | 備考 |
|-----|--------------------|--------|------|
| /   | 出欠ボード情報取得 | select | 以下の画面にも同じ機能が存在する。<br>・出欠ボード編集画面 |

#### URLとテーブルの対応表
| | attendance | event_date	| event_date_comment	| participant	| event	|
| --- | --- |  --- | --- | --- | --- |
| /	| ● |	●	| ● |	●	| ●	|

### 出欠ボード_出欠記入ボタン押下時
![出欠ボード_出欠記入ボタン押下時](https://user-images.githubusercontent.com/17742203/70808405-f789ea00-1e02-11ea-8df3-be56f7afc566.png)

#### 機能一覧

機能名 | 機能内容
--- | ---
出欠記入欄作成 | ・カレンダの一番下に「名前」「日付」「出欠」を入力する欄を表示する。 <br>・「出欠」のアイコンを押下すると色が付く。
「出欠確定」ボタン押下 | ・出欠の内容をテーブルに登録する。 <br>・画面の状態を初期画面の状態にする。
「戻る」ボタン押下 | 画面の状態を初期画面の状態にする。
出欠情報の表示※1 | 
参加人数の集計※1 | 出欠ボードに表示する出欠情報で日付毎の参加人数の合計を表示する。

※1 以下の画面状態にも同じ機能が存在する。<br>・出欠ボード_初期画面<br>・出欠ボード_出欠変更ボタン押下時<br>・出欠ボード_出欠削除ボタン押下時

#### URLと処理の対応表
| URL  | 処理         | CRUD   |
|------|--------------|--------|
| /add | 出欠追加処理 | insert |

#### URLとテーブルの対応表
|   | attendance | event_date | event_date_comment | participant | event |
|------|------------|------------|--------------------|-------------|-------|
| /add | ●          |            |                    | ●           |       |

<a id="section1">
### <a href="#section1">出欠ボード_出欠変更ボタン押下時</a>
![出欠ボード_出欠変更ボタン押下時](https://user-images.githubusercontent.com/17742203/70808435-05d80600-1e03-11ea-873e-755bbf6d7d0b.png)

#### 機能一覧

機能名 | 機能内容
--- | ---
出欠変更欄作成 | ・押下した名前の行に「出欠」を変更する欄を表示する。<br>・「出欠」のアイコンを押下すると色が付く。
「出欠確定」押下 | ・出欠の内容をテーブルに登録する。<br>・画面の状態を初期画面の状態にする。
「戻る」ボタン押下 | 画面の状態を初期画面の状態にする。
出欠情報の表示※1 | 
参加人数の集計※1 | 出欠ボードに表示する出欠情報で日付毎の参加人数の合計を表示する。<br>

※1 以下の画面状態にも同じ機能が存在する。<br>・出欠ボード_初期画面<br>・出欠ボード_出欠記入ボタン押下時<br>・出欠ボード_出欠削除ボタン押下時

#### URLと処理の対応表
| URL     | 処理         | CRUD   | 備考                                                                                          |
|-------------------------|------------------------------------|------------------|-------------------------------------------|
| /change	| 出欠変更処理	| update	 | 1.押下した名前のparticipant_idに基づいてparticipant,attendanceの削除フラグをupdateで1にする。<br>2.出欠追加処理と同じSQLを実行する。                                          |                                           |

#### URLとテーブルの対応表
| | attendance | event_date | event_date_comment | participant | event |                                           
|---------------|-------------------|---------------|-------------|----------------------------|---------------|
| /change	| ● | | | | |

### 出欠ボード_出欠削除ボタン押下時
![出欠ボード_出欠削除ボタン押下時](https://user-images.githubusercontent.com/17742203/70808261-a548c900-1e02-11ea-8149-f0b63b8393cf.png)

#### 機能一覧

機能名 | 機能内容
--- | ---
「削除」ボタン表示 | ・名前毎に「削除」ボタンが表示される。<br>・「削除」ボタンを押下すると「名前」「出欠」が削除される。
「出欠確定」ボタン押下 | ・出欠の内容をテーブルに登録する。<br>・画面の状態を初期画面の状態にする。
「戻る」ボタン押下 | 画面の状態を初期画面の状態にする。
出欠情報の表示※1 | 
参加人数の集計※1 | 出欠ボードに表示する出欠情報で日付毎の参加人数の合計を表示する。<br>

※1 以下の画面状態にも同じ機能が存在する。<br>・出欠ボード_初期画面<br>・出欠ボード_出欠記入ボタン押下時<br>・出欠ボード_出欠変更ボタン押下時

#### URLと処理の対応表
| URL     | 処理         | CRUD   | 備考                                                                                          |
|---------|--------------|--------|-----------------------------------------------------------------------------------------------|
| /delete | 出欠削除処理 | update | 1.押下した名前のparticipant_idに基づいてparticipant,attendanceの削除フラグをupdateで1にする。 |

#### URLとテーブルの対応表
|      | attendance | event_date | event_date_comment | participant | event |
|---------|------------|------------|--------------------|-------------|-------|
| /delete | ●          |            |                    | ●           |       |

### 出欠ボード作成
![出欠ボード作成](https://user-images.githubusercontent.com/17742203/70808319-c0b3d400-1e02-11ea-9b04-badc092a161a.png)

#### 機能一覧

機能名 | 機能内容
--- | ---
日程追加※1	| ・カレンダから日程を押下し選択した「日程」と「コメント」「日程削除」の欄を追加する。<br>・「日程」は入力不可<br>・「コメント」「日程削除」は入力可
「日程削除」ボタン押下※1	| 押下した日程の「日程」「コメント」「日程削除」の欄を削除する。
「作成完了」ボタン押下※1	| 1.出欠の内容をテーブルに登録する。<br>2a.登録後、出欠ボード作成画面の場合 <br>「作成完了しました！<br>以下のURLから出欠入れてください！<br>(URL)」を表示する。<br>※2<br>2b.登録後、出欠ボード編集画面の場合、出欠ボード_初期画面に遷移する。
「完了メッセージ表示」	| 「作成完了」ボタン押下後<br>「作成完了しました！<br>以下のURLから出欠入れてください！<br>(URL)」<br>を表示する。

※1 以下の画面状態にも同じ機能が存在する。<br>・出欠ボード作成・編集_出欠ボード編集<br>
※2 2aのURLを押下すると出欠ボード_初期画面に遷移する。

#### URLと処理の対応表

URL | 処理 | CRUD
--- | --- | ---
/create | 出欠ボード情報取得 | select
/create/new | 出欠ボード作成処理 | insert

#### URLとテーブルの対応表

| | attendance | event_date | event_date_comment | participant | event
--- | --- | --- | --- | --- | ---
/create |  | ● | ● |  | ●
/create/new |  | ● | ● |  | ●


### 出欠ボード編集
![出欠ボード編集](https://user-images.githubusercontent.com/17742203/70808343-cf9a8680-1e02-11ea-9922-41f5b0d542a8.png)

#### 機能一覧

機能名 | 機能内容
--- | ---
日程追加※1	| ・カレンダから日程を押下し選択した「日程」と「コメント」「日程削除」の欄を追加する。<br>・「日程」は入力不可<br>・「コメント」「日程削除」は入力可
「日程削除」ボタン押下※1	| 押下した日程の「日程」「コメント」「日程削除」の欄を削除する。
「作成完了」ボタン押下※1	| 1.出欠の内容をテーブルに登録する。<br>2a.登録後、出欠ボード作成画面の場合 <br>「作成完了しました！<br>以下のURLから出欠入れてください！<br>(URL)」を表示する。<br>※2<br>2b.登録後、出欠ボード編集画面の場合、出欠ボード_初期画面に遷移する。
「戻る」ボタン押下	| 「画面の状態を初期画面の状態にする。

※1 以下の画面状態にも同じ機能が存在する。<br>・出欠ボード作成・編集_出欠ボード作成<br>
※2 2aのURLを押下すると出欠ボード_初期画面に遷移する。

#### URLと処理の対応表

URL | 処理 | CRUD | 備考
--- | --- | --- | ---
/create | 出欠ボード情報取得 | select | 
/create/edit | 出欠ボード更新処理 | updateinsert | 1.画面に保存してあるevent_idに基づいてattendance,event_date,event_date_comment,participant eventの削除フラグをupdateで1にする。<br>2.出欠ボード作成処理と同じSQLを実行する。

#### URLとテーブルの対応表

|                                        | attendance | event_date | event_date_comment | participant | event |                                                                                                                                  |
|--------------------------------------------|------------|------------|--------------------|-------------|-------|----------------------------------------------------------------------------------------------------------------------------------|
| /create                                    |            | ●          | ●                  |             | ●     |                                                                                                                                  |
| /create/edit                               | ●          | ●          | ●                  | ●           |       | 1.画面に保存してあるevent_idに基づいてattendance,event_date,event_date_comment,participant eventの削除フラグをupdateで1にする。 <br>2.出欠ボード作成処理と同じSQLを実行する。 |            |            |                    |             |       |                                                                                                                                  |


機能名 | 機能内容
--- | ---
日程追加※1	| ・カレンダから日程を押下し選択した「日程」と「コメント」「日程削除」の欄を追加する。<br>・「日程」は入力不可<br>・「コメント」「日程削除」は入力可
「日程削除」ボタン押下※1	| 押下した日程の「日程」「コメント」「日程削除」の欄を削除する。
「作成完了」ボタン押下※1	| 1.出欠の内容をテーブルに登録する。<br>2a.登録後、出欠ボード作成画面の場合 <br>「作成完了しました！<br>以下のURLから出欠入れてください！<br>(URL)」を表示する。<br>※2<br>2b.登録後、出欠ボード編集画面の場合、出欠ボード_初期画面に遷移する。
「戻る」ボタン押下	| 画面の状態を初期画面の状態にする。

※1 以下の画面状態にも同じ機能が存在する。<br>・出欠ボード作成・編集_出欠ボード作成<br>
※2 2aのURLを押下すると出欠ボード_初期画面に遷移する。

## テーブル処理一覧・ルーティング

## 画面遷移図・画面定義一覧
![画面遷移図・画面定義一覧](https://user-images.githubusercontent.com/17742203/70808285-b1cd2180-1e02-11ea-8ca9-d0cc2fa793b2.png)
